<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Museo - Sale</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../tabella_opere.css">
</head>
<body>
<div class="logo-museo">
  <img src="../../icon/logo.png" alt="Logo Museo">
</div>
<header>
  <h1>Sale</h1>
</header>

<nav>
  <a href="../../src/dashboard_utente.php" class="attivo">Home</a>
  <a href="opere_utente.html">Opere</a>
  <a href="autori_utente.html">Autori</a>
  <a href="sale_utente.html">Sale</a>
  <a href="temi_utente.html">Temi</a>
</nav>

<main>
  <section class="griglia-sale" id="contenitore-sale">
    <!-- Le card saranno generate dinamicamente -->
  </section>

  <div class="paginazione-sale">
    <button id="precedente" disabled>« Precedente</button>
    <button id="successivo">Successivo »</button>
  </div>
</main>

<footer>
  <p>&copy; 2025 Museo Web - Università degli Studi di Bergamo</p>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  let tutteLeSale = [];
  let paginaCorrente = 1;
  const perPagina = 10;

  $(document).ready(function () {
    $.getJSON("../../src/get_sale.php", function (data) {
      tutteLeSale = data;
      mostraPagina(1);
    });

    $('#successivo').on('click', function () {
      paginaCorrente++;
      mostraPagina(paginaCorrente);
    });

    $('#precedente').on('click', function () {
      paginaCorrente--;
      mostraPagina(paginaCorrente);
    });
  });

  function mostraPagina(pagina) {
    const start = (pagina - 1) * perPagina;
    const end = pagina * perPagina;
    const salePagina = tutteLeSale.slice(start, end);

    const contenitore = $('#contenitore-sale');
    contenitore.empty();

    if (salePagina.length === 0) {
      contenitore.append('<p>Nessuna sala disponibile.</p>');
      return;
    }

    salePagina.forEach(sala => {
      contenitore.append(`
        <div class="card-sala">
          <h3>${sala.nome}</h3>
          <p><strong>Superficie:</strong> ${sala.superficie} m²</p>
          <p><strong>Tema:</strong> ${sala.tema}</p>
        </div>
      `);
    });

    $('#precedente').prop('disabled', pagina === 1);
    $('#successivo').prop('disabled', end >= tutteLeSale.length);
  }
</script>
</body>
</html>
